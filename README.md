# Meshtastic MQTT Redis Client —Å HTTP API

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ç–∏ Meshtastic —Å HTTP API –¥–ª—è –æ—Ç–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ—Ä—Ç—É 80, —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å meshtasticback.taubetele.com.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* üîÑ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MQTT —Å–µ—Ä–≤–µ—Ä–∞–º Meshtastic
* üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
* üåê HTTP API –Ω–∞ –ø–æ—Ä—Ç—É 80 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
* üóÑÔ∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Redis
* ‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
* üîß –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å meshtasticback.taubetele.com

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Node.js >= 18.0.0
* Redis —Å–µ—Ä–≤–µ—Ä
* Meshtastic protobufs

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ protobufs:
```bash
git clone https://github.com/meshtastic/protobufs.git
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
# Redis
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# HTTP Server
PORT=80
CORS_ORIGIN=*
```

## –ó–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω
```bash
npm start
```

## HTTP API Endpoints

### GET /
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–≤–∫–ª—é—á–∞—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)

### GET /gps:deviceId
–ü–æ–ª—É—á–∏—Ç—å GPS –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–ü—Ä–∏–º–µ—Ä: `/gps:123456789`

### GET /deviceMetrics:deviceId
–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–±–∞—Ç–∞—Ä–µ—è, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∫–∞–Ω–∞–ª–∞)
–ü—Ä–∏–º–µ—Ä: `/deviceMetrics:123456789`

### GET /environmentMetrics:deviceId
–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ)
–ü—Ä–∏–º–µ—Ä: `/environmentMetrics:123456789`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Device Data
```json
{
  "123456789": {
    "server": "meshtastic.taubetele.com",
    "timestamp": "2025-06-23T10:30:00.000Z",
    "user": {
      "serverTime": 1719140200000,
      "rxTime": "2025-06-23T10:30:00.000Z",
      "type": "broadcast",
      "from": 123456789,
      "to": 4294967295,
      "data": {
        "shortName": "NODE1",
        "longName": "Node 1",
        "hwModel": "TBEAM"
      }
    },
    "position": {
      "data": {
        "latitudeI": 123456789,
        "longitudeI": 987654321,
        "altitude": 100
      }
    }
  }
}
```

### GPS Data
```json
{
  "from": "123456789",
  "data": [
    {
      "time": 1719140200000,
      "latitudeI": 123456789,
      "longitudeI": 987654321,
      "altitude": 100
    }
  ]
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–µ—Ä–≤–µ—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `config.mjs`:

```javascript
export const servers = [
  {
    address: 'mqtt://username:password@server.com',
    name: 'server-name',
    type: 'mqtt'
  }
]
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç:
* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º
* –û–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
* –û—à–∏–±–∫–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
* –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Redis

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

* –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
* –ú–∞–∫—Å–∏–º—É–º 200 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
* –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (24 —á–∞—Å–∞)
* Graceful shutdown

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º —Å API meshtasticback.taubetele.com:
* –¢–µ –∂–µ endpoints
* –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
